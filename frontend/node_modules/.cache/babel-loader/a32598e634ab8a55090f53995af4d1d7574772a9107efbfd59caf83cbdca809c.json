{"ast":null,"code":"import axios from 'axios';\nconst legalNameRegex = /^[a-zA-Z.\\-| ]+$/;\nconst legalEmailRegex = /^[a-zA-Z0-9,.\\-@|]+$/;\nconst legalJobDetailsRegex = /^[a-zA-Z0-9,.\\-| ]+$/;\nexport default {\n  data() {\n    return {\n      client: {},\n      editableClient: {},\n      isEditing: false,\n      drawer: false,\n      drawerItems: [{\n        title: 'DASHBOARD',\n        icon: 'mdi-view-dashboard',\n        to: '/dashboard'\n      }, {\n        title: 'CLIENT TRACKING',\n        icon: 'mdi-account-group',\n        to: '/clients'\n      }, {\n        title: 'AGENT TRACKING',\n        icon: 'mdi-account-tie',\n        to: '/agents'\n      }, {\n        title: 'COMMS. MGMT.',\n        icon: 'mdi-message-text-outline',\n        to: '/commission-management'\n      }, {\n        title: 'SALES TRACKING',\n        icon: 'mdi-chart-line',\n        to: '/sales-tracking'\n      }, {\n        title: 'PROPERTY LISTING',\n        icon: 'mdi-home-city-outline',\n        to: {\n          name: 'PropertyListing'\n        }\n      }],\n      agentOptions: ['Jann Kevin Polagne', 'Daniella Villamer', 'jerome Mark Salud', 'Sean Rey Dizon', 'Ken Chavez'],\n      sales_manager: ['Jann Kevin Polagne', 'Daniella Villamer', 'jerome Mark Salud', 'Sean Rey Dizon', 'Ken Chavez'],\n      addClientRules: {\n        required: v => !!v || 'This field is required',\n        email: v => /.+@.+\\..+/.test(v) || 'E-mail must be valid',\n        emailLegal: v => legalEmailRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, @, and pipe allowed',\n        number: v => /^[0-9|]+$/.test(v || '') && (v || '').replace(/[^0-9]/g, '').length <= 11 || 'Only numbers and max 11 digits',\n        legalName: v => legalNameRegex.test(v || '') || 'Only letters, dot, dash, and spaces allowed',\n        jobDetailsLegal: v => legalJobDetailsRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, pipe, and spaces allowed',\n        sourceOfFundsLegal: v => legalJobDetailsRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, pipe, and spaces allowed'\n      },\n      addClientFormValid: false\n    };\n  },\n  created() {\n    const clientId = this.$route.params.id;\n    this.fetchClientDetails(clientId);\n  },\n  computed: {\n    firstNameError() {\n      return this.isEditing && !this.legalNameRule(this.editableClient.first_name) ? ['Only [a-z | A-Z | . | - | | ] characters are allowed'] : [];\n    },\n    lastNameError() {\n      return this.isEditing && !this.legalNameRule(this.editableClient.last_name) ? ['Only [a-z | A-Z | . | - | | ] characters are allowed'] : [];\n    }\n  },\n  methods: {\n    fetchClientDetails(clientId) {\n      axios.get(`http://localhost:3000/api/clients/${clientId}`).then(response => {\n        this.client = response.data;\n        // Ensure boolean conversion for checkboxes\n        this.editableClient = {\n          ...response.data,\n          proof_of_billing: !!response.data.proof_of_billing,\n          tax_certificate: !!response.data.tax_certificate,\n          birth_certificate: !!response.data.birth_certificate,\n          marriage_contract: !!response.data.marriage_contract\n        };\n      }).catch(error => {\n        console.error('Error fetching client details:', error);\n      });\n    },\n    toggleEdit() {\n      if (this.isEditing) {\n        // Validate before saving\n        if (this.$refs.editClientForm && !this.$refs.editClientForm.validate()) {\n          // If validation fails, do not save\n          return;\n        }\n        // Convert booleans to 1/0 for backend\n        const payload = {\n          ...this.editableClient,\n          proof_of_billing: this.editableClient.proof_of_billing ? 1 : 0,\n          tax_certificate: this.editableClient.tax_certificate ? 1 : 0,\n          birth_certificate: this.editableClient.birth_certificate ? 1 : 0,\n          marriage_contract: this.editableClient.marriage_contract ? 1 : 0\n        };\n        axios.put(`http://localhost:3000/api/clients/${this.client.id}`, payload).then(() => {\n          this.client = {\n            ...this.editableClient\n          };\n          this.isEditing = false;\n        }).catch(error => {\n          console.error('Error saving client details:', error);\n          alert('Failed to save changes. Please try again.');\n        });\n      } else {\n        this.isEditing = true;\n      }\n    },\n    logout() {\n      // Implement logout functionality here\n    },\n    legalNameRule(value) {\n      return /^[a-zA-Z.\\-| ]*$/.test(value) || 'Only letters, dot (.), dash (-), pipe (|), and spaces are allowed';\n    },\n    onLegalNameInput(field, event) {\n      // Always get the value from the event target\n      const value = typeof event === 'string' ? event : event?.target?.value || '';\n      this.editableClient[field] = value.replace(/[^a-zA-Z.\\-| ]/g, '');\n    },\n    filterLegalName(field) {\n      const legal = this.editableClient[field].replace(/[^a-zA-Z.\\-| ]/g, '');\n      this.editableClient[field] = legal;\n    },\n    filterPhoneNumber() {\n      let value = this.editableClient.phone_number.replace(/[^0-9|]/g, '');\n      const digits = value.replace(/[^0-9]/g, '');\n      if (digits.length > 11) {\n        let digitCount = 0;\n        let result = '';\n        for (let i = 0; i < value.length; i++) {\n          if (/\\d/.test(value[i])) {\n            if (digitCount < 11) {\n              result += value[i];\n              digitCount++;\n            }\n          } else if (value[i] === '|') {\n            result += '|';\n          }\n        }\n        value = result;\n      }\n      this.editableClient.phone_number = value;\n    },\n    filterEmail() {\n      let filtered = this.editableClient.email.replace(/[^a-zA-Z0-9,.\\-@|]/g, '');\n      if (filtered.length > 50) {\n        filtered = filtered.slice(0, 50);\n      }\n      this.editableClient.email = filtered;\n    },\n    filterJobDetails() {\n      this.editableClient.job_details = this.editableClient.job_details.replace(/[^a-zA-Z0-9,.\\-| ]/g, '');\n    },\n    filterSourceOfFunds() {\n      this.editableClient.source_of_funds = this.editableClient.source_of_funds.replace(/[^a-zA-Z0-9,.\\-| ]/g, '');\n    }\n  }\n};","map":{"version":3,"names":["axios","legalNameRegex","legalEmailRegex","legalJobDetailsRegex","data","client","editableClient","isEditing","drawer","drawerItems","title","icon","to","name","agentOptions","sales_manager","addClientRules","required","v","email","test","emailLegal","number","replace","length","legalName","jobDetailsLegal","sourceOfFundsLegal","addClientFormValid","created","clientId","$route","params","id","fetchClientDetails","computed","firstNameError","legalNameRule","first_name","lastNameError","last_name","methods","get","then","response","proof_of_billing","tax_certificate","birth_certificate","marriage_contract","catch","error","console","toggleEdit","$refs","editClientForm","validate","payload","put","alert","logout","value","onLegalNameInput","field","event","target","filterLegalName","legal","filterPhoneNumber","phone_number","digits","digitCount","result","i","filterEmail","filtered","slice","filterJobDetails","job_details","filterSourceOfFunds","source_of_funds"],"sources":["C:\\Users\\jann kevin\\Desktop\\ADVENCH PORTALS\\frontend\\src\\components\\ClientDetails.vue"],"sourcesContent":["<!-- filepath: c:\\Users\\jann kevin\\Desktop\\ADVENCH PORTAL\\frontend\\src\\components\\ClientDetails.vue -->\r\n<template>\r\n  <v-app>\r\n    <!-- Navigation Drawer -->\r\n    <v-navigation-drawer\r\n      v-model=\"drawer\"\r\n      app\r\n      color=\"#f5f5f5\"\r\n      width=\"260\"\r\n      class=\"elevation-3 rounded-drawer\"\r\n      dark\r\n    >\r\n      <!-- Logo and App Name -->\r\n      <v-sheet color=\"white\" class=\"pa-4 d-flex align-center\" elevation=\"0\">\r\n        <img src=\"../assets/logo.png\" alt=\"Advench Realty Logo\" style=\"max-width: 48px; margin-right: 12px;\" />\r\n        <div>\r\n          <div class=\"font-weight-bold\" style=\"color:#388e3c;\">ADVЕNCH</div>\r\n          <div class=\"text-caption\" style=\"color:#757575;\">REALTY</div>\r\n        </div>\r\n        <v-spacer></v-spacer>\r\n        <v-btn icon @click=\"drawer = false\">\r\n          <v-icon color=\"grey darken-2\">mdi-close</v-icon>\r\n        </v-btn>\r\n      </v-sheet>\r\n      <v-divider></v-divider>\r\n      <!-- Navigation List -->\r\n      <v-list dense nav>\r\n        <v-list-item\r\n          v-for=\"item in drawerItems\"\r\n          :key=\"item.title\"\r\n          :to=\"item.to\"\r\n          link\r\n          class=\"drawer-link\"\r\n          active-class=\"drawer-link--active\"\r\n        >\r\n          <v-list-item-icon>\r\n            <v-icon :color=\"item.iconColor || 'green darken-2'\">{{ item.icon }}</v-icon>\r\n          </v-list-item-icon>\r\n          <v-list-item-title class=\"ml-2\">{{ item.title }}</v-list-item-title>\r\n        </v-list-item>\r\n      </v-list>\r\n      <v-divider class=\"my-2\"></v-divider>\r\n      <v-list dense>\r\n        <v-list-item link @click=\"logout\" class=\"drawer-link\">\r\n          <v-list-item-icon>\r\n            <v-icon color=\"red darken-1\">mdi-logout</v-icon>\r\n          </v-list-item-icon>\r\n          <v-list-item-title class=\"ml-2\">LOGOUT</v-list-item-title>\r\n        </v-list-item>\r\n      </v-list>\r\n    </v-navigation-drawer>\r\n\r\n    <v-main>\r\n      <v-container fluid class=\"pa-0\" style=\"max-width: 85vw; margin: 0 auto;\">\r\n        <!-- Top Navigation Row (matches ClientRecords.vue) -->\r\n        <v-row align=\"center\" justify=\"space-between\" class=\"px-4 mt-4\">\r\n          <v-col cols=\"auto\" class=\"d-flex align-center\">\r\n            <img src=\"../assets/logo.png\" alt=\"Advench Realty Logo\" style=\"max-width: 60px; margin-right: 12px;\" />\r\n            <div>\r\n              <h2 class=\"text-h6 font-weight-bold mb-0\">ADVЕNCH REALTY</h2>\r\n              <p class=\"text-subtitle-2 mb-0\">AND DEVELOPMENT CO.</p>\r\n            </div>\r\n          </v-col>\r\n          <v-col cols=\"auto\">\r\n            <v-btn icon @click=\"drawer = true\">\r\n              <v-icon color=\"green darken-4\">mdi-menu</v-icon>\r\n            </v-btn>\r\n          </v-col>\r\n        </v-row>\r\n\r\n        <!-- Profile Card -->\r\n        <v-card class=\"mb-6 pa-4 profile-card\">\r\n          <v-row align=\"center\">\r\n            <v-col cols=\"auto\">\r\n              <v-avatar size=\"80\">\r\n                <v-icon size=\"80\" color=\"grey lighten-2\">mdi-account</v-icon>\r\n              </v-avatar>\r\n            </v-col>\r\n            <v-col>\r\n              <div class=\"profile-title\">{{ client.first_name }} {{ client.last_name }}</div>\r\n              <div class=\"profile-subtitle\">{{ client.job_details }}</div>\r\n              <div class=\"profile-location\">{{ client.address }}</div>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n\r\n        <!-- Personal Information Card -->\r\n        <v-card class=\"mb-6 pa-6\">\r\n          <div class=\"d-flex align-center mb-4\">\r\n            <span class=\"section-title mr-2\" style=\"color:#26a69a;\">Personal information</span>\r\n          </div>\r\n          <v-form ref=\"editClientForm\" v-model=\"addClientFormValid\" lazy-validation>\r\n            <v-row>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">First Name</div>\r\n                <div v-if=\"!isEditing\">{{ client.first_name }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.first_name\"\r\n                  label=\"First Name\"\r\n                  :rules=\"[addClientRules.required, addClientRules.legalName]\"\r\n                  @input=\"filterLegalName('first_name')\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Last Name</div>\r\n                <div v-if=\"!isEditing\">{{ client.last_name }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.last_name\"\r\n                  label=\"Last Name\"\r\n                  :rules=\"[addClientRules.required, addClientRules.legalName]\"\r\n                  @input=\"filterLegalName('last_name')\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Phone Number</div>\r\n                <div v-if=\"!isEditing\">{{ client.phone_number }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.phone_number\"\r\n                  label=\"Phone Number\"\r\n                  :rules=\"[addClientRules.required, addClientRules.number]\"\r\n                  @input=\"filterPhoneNumber\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Email</div>\r\n                <div v-if=\"!isEditing\">{{ client.email }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.email\"\r\n                  label=\"Email\"\r\n                  :rules=\"[addClientRules.required, addClientRules.email, addClientRules.emailLegal]\"\r\n                  @input=\"filterEmail\"\r\n                  maxlength=\"50\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Gender</div>\r\n                <div v-if=\"!isEditing\">{{ client.gender }}</div>\r\n                <v-select\r\n                  v-else\r\n                  v-model=\"editableClient.gender\"\r\n                  :items=\"['Male', 'Female', 'Other', 'Prefer not to say']\"\r\n                  label=\"Gender\"\r\n                  :rules=\"[addClientRules.required]\"\r\n                  dense\r\n                  clearable\r\n                ></v-select>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Date of Birth</div>\r\n                <div v-if=\"!isEditing\">{{ client.dob }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.dob\"\r\n                  label=\"Date of Birth\"\r\n                  type=\"date\"\r\n                  :rules=\"[addClientRules.required]\"\r\n                  dense\r\n                  hide-details\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Address</div>\r\n                <div v-if=\"!isEditing\">{{ client.address }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.address\"\r\n                  label=\"Address\"\r\n                  :rules=\"[addClientRules.required]\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Occupation</div>\r\n                <div v-if=\"!isEditing\">{{ client.job_details }}</div>\r\n                <v-text-field v-else v-model=\"editableClient.job_details\" dense hide-details></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Monthly Income</div>\r\n                <div v-if=\"!isEditing\">{{ client.monthly_income ? `₱${client.monthly_income}` : '' }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.monthly_income\"\r\n                  dense\r\n                  hide-details\r\n                  prefix=\"₱\"\r\n                  type=\"number\"\r\n                ></v-text-field>\r\n              </v-col>\r\n              <v-col cols=\"12\" md=\"6\">\r\n                <div class=\"label\">Source of Funds</div>\r\n                <div v-if=\"!isEditing\">{{ client.source_of_funds }}</div>\r\n                <v-text-field\r\n                  v-else\r\n                  v-model=\"editableClient.source_of_funds\"\r\n                  label=\"Source of Funds\"\r\n                  :rules=\"[addClientRules.required, addClientRules.sourceOfFundsLegal]\"\r\n                  @input=\"filterSourceOfFunds\"\r\n                ></v-text-field>\r\n              </v-col>\r\n            </v-row>\r\n          </v-form>\r\n        </v-card>\r\n\r\n\r\n        <!-- Documents Card -->\r\n        <v-card class=\"mb-6 pa-6\">\r\n          <div class=\"section-title mb-4\" style=\"color:#26a69a;\">Documents</div>\r\n          <v-row>\r\n            <v-col cols=\"12\" md=\"6\">\r\n              <div class=\"d-flex align-center mb-2\">\r\n                <div class=\"label\">Proof of Billing</div>\r\n                <template v-if=\"!isEditing\">\r\n                  <v-icon v-if=\"client.proof_of_billing\" color=\"success\" small>mdi-checkbox-marked</v-icon>\r\n                  <v-icon v-else color=\"grey\" small>mdi-checkbox-blank-outline</v-icon>\r\n                </template>\r\n                <v-checkbox v-else v-model=\"editableClient.proof_of_billing\" hide-details dense class=\"ml-2\"></v-checkbox>\r\n              </div>\r\n              <div class=\"d-flex align-center mb-2\">\r\n                <div class=\"label\">Tax Certificate</div>\r\n                <template v-if=\"!isEditing\">\r\n                  <v-icon v-if=\"client.tax_certificate\" color=\"success\" small>mdi-checkbox-marked</v-icon>\r\n                  <v-icon v-else color=\"grey\" small>mdi-checkbox-blank-outline</v-icon>\r\n                </template>\r\n                <v-checkbox v-else v-model=\"editableClient.tax_certificate\" hide-details dense class=\"ml-2\"></v-checkbox>\r\n              </div>\r\n            </v-col>\r\n            <v-col cols=\"12\" md=\"6\">\r\n              <div class=\"d-flex align-center mb-2\">\r\n                <div class=\"label\">Birth Certificate</div>\r\n                <template v-if=\"!isEditing\">\r\n                  <v-icon v-if=\"client.birth_certificate\" color=\"success\" small>mdi-checkbox-marked</v-icon>\r\n                  <v-icon v-else color=\"grey\" small>mdi-checkbox-blank-outline</v-icon>\r\n                </template>\r\n                <v-checkbox v-else v-model=\"editableClient.birth_certificate\" hide-details dense class=\"ml-2\"></v-checkbox>\r\n              </div>\r\n              <div class=\"d-flex align-center mb-2\">\r\n                <div class=\"label\">Marriage Contract (if married)</div>\r\n                <template v-if=\"!isEditing\">\r\n                  <v-icon v-if=\"client.marriage_contract\" color=\"success\" small>mdi-checkbox-marked</v-icon>\r\n                  <v-icon v-else color=\"grey\" small>mdi-checkbox-blank-outline</v-icon>\r\n                </template>\r\n                <v-checkbox v-else v-model=\"editableClient.marriage_contract\" hide-details dense class=\"ml-2\"></v-checkbox>\r\n              </div>\r\n            </v-col>\r\n          </v-row>\r\n        </v-card>\r\n\r\n        <!-- Edit/Save Button -->\r\n        <div class=\"d-flex justify-end mb-8\">\r\n          <v-btn color=\"primary\" @click=\"toggleEdit\" small>\r\n            {{ isEditing ? 'Save' : 'Edit' }}\r\n          </v-btn>\r\n        </div>\r\n      </v-container>\r\n    </v-main>\r\n  </v-app>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nconst legalNameRegex = /^[a-zA-Z.\\-| ]+$/;\r\nconst legalEmailRegex = /^[a-zA-Z0-9,.\\-@|]+$/;\r\nconst legalJobDetailsRegex = /^[a-zA-Z0-9,.\\-| ]+$/;\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      client: {},\r\n      editableClient: {},\r\n      isEditing: false,\r\n      drawer: false,\r\n      drawerItems: [\r\n        { title: 'DASHBOARD', icon: 'mdi-view-dashboard', to: '/dashboard' },\r\n        { title: 'CLIENT TRACKING', icon: 'mdi-account-group', to: '/clients' },\r\n        { title: 'AGENT TRACKING', icon: 'mdi-account-tie', to: '/agents' },\r\n        { title: 'COMMS. MGMT.', icon: 'mdi-message-text-outline', to: '/commission-management' },\r\n        { title: 'SALES TRACKING', icon: 'mdi-chart-line', to: '/sales-tracking' },\r\n        { title: 'PROPERTY LISTING', icon: 'mdi-home-city-outline', to: { name: 'PropertyListing' } },\r\n      ],\r\n      agentOptions: [\r\n        'Jann Kevin Polagne',\r\n        'Daniella Villamer',\r\n        'jerome Mark Salud',\r\n        'Sean Rey Dizon',\r\n        'Ken Chavez',\r\n      ],\r\n       sales_manager: [\r\n        'Jann Kevin Polagne',\r\n        'Daniella Villamer',\r\n        'jerome Mark Salud',\r\n        'Sean Rey Dizon',\r\n        'Ken Chavez',\r\n      ],\r\n      addClientRules: {\r\n        required: v => !!v || 'This field is required',\r\n        email: v => /.+@.+\\..+/.test(v) || 'E-mail must be valid',\r\n        emailLegal: v => legalEmailRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, @, and pipe allowed',\r\n        number: v =>\r\n          /^[0-9|]+$/.test(v || '') &&\r\n          ((v || '').replace(/[^0-9]/g, '').length <= 11) ||\r\n          'Only numbers and max 11 digits',\r\n        legalName: v => legalNameRegex.test(v || '') || 'Only letters, dot, dash, and spaces allowed',\r\n        jobDetailsLegal: v =>\r\n          legalJobDetailsRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, pipe, and spaces allowed',\r\n        sourceOfFundsLegal: v =>\r\n          legalJobDetailsRegex.test(v || '') || 'Only letters, numbers, comma, dot, dash, pipe, and spaces allowed',\r\n      },\r\n      addClientFormValid: false,\r\n    };\r\n  },\r\n  created() {\r\n    const clientId = this.$route.params.id;\r\n    this.fetchClientDetails(clientId);\r\n  },\r\n  computed: {\r\n    firstNameError() {\r\n      return this.isEditing && !this.legalNameRule(this.editableClient.first_name)\r\n        ? ['Only [a-z | A-Z | . | - | | ] characters are allowed']\r\n        : [];\r\n    },\r\n    lastNameError() {\r\n      return this.isEditing && !this.legalNameRule(this.editableClient.last_name)\r\n        ? ['Only [a-z | A-Z | . | - | | ] characters are allowed']\r\n        : [];\r\n    }\r\n  },\r\n  methods: {\r\n    fetchClientDetails(clientId) {\r\n      axios\r\n        .get(`http://localhost:3000/api/clients/${clientId}`)\r\n        .then((response) => {\r\n          this.client = response.data;\r\n          // Ensure boolean conversion for checkboxes\r\n          this.editableClient = {\r\n            ...response.data,\r\n            proof_of_billing: !!response.data.proof_of_billing,\r\n            tax_certificate: !!response.data.tax_certificate,\r\n            birth_certificate: !!response.data.birth_certificate,\r\n            marriage_contract: !!response.data.marriage_contract,\r\n          };\r\n        })\r\n        .catch((error) => {\r\n          console.error('Error fetching client details:', error);\r\n        });\r\n    },\r\n    toggleEdit() {\r\n      if (this.isEditing) {\r\n        // Validate before saving\r\n        if (this.$refs.editClientForm && !this.$refs.editClientForm.validate()) {\r\n          // If validation fails, do not save\r\n          return;\r\n        }\r\n        // Convert booleans to 1/0 for backend\r\n        const payload = {\r\n          ...this.editableClient,\r\n          proof_of_billing: this.editableClient.proof_of_billing ? 1 : 0,\r\n          tax_certificate: this.editableClient.tax_certificate ? 1 : 0,\r\n          birth_certificate: this.editableClient.birth_certificate ? 1 : 0,\r\n          marriage_contract: this.editableClient.marriage_contract ? 1 : 0,\r\n        };\r\n        axios\r\n          .put(`http://localhost:3000/api/clients/${this.client.id}`, payload)\r\n          .then(() => {\r\n            this.client = { ...this.editableClient };\r\n            this.isEditing = false;\r\n          })\r\n          .catch((error) => {\r\n            console.error('Error saving client details:', error);\r\n            alert('Failed to save changes. Please try again.');\r\n          });\r\n      } else {\r\n        this.isEditing = true;\r\n      }\r\n    },\r\n    logout() {\r\n      // Implement logout functionality here\r\n    },\r\n    legalNameRule(value) {\r\n      return /^[a-zA-Z.\\-| ]*$/.test(value) || 'Only letters, dot (.), dash (-), pipe (|), and spaces are allowed';\r\n    },\r\n    onLegalNameInput(field, event) {\r\n      // Always get the value from the event target\r\n      const value = typeof event === 'string' ? event : event?.target?.value || '';\r\n      this.editableClient[field] = value.replace(/[^a-zA-Z.\\-| ]/g, '');\r\n    },\r\n    filterLegalName(field) {\r\n      const legal = this.editableClient[field].replace(/[^a-zA-Z.\\-| ]/g, '');\r\n      this.editableClient[field] = legal;\r\n    },\r\n    filterPhoneNumber() {\r\n      let value = this.editableClient.phone_number.replace(/[^0-9|]/g, '');\r\n      const digits = value.replace(/[^0-9]/g, '');\r\n      if (digits.length > 11) {\r\n        let digitCount = 0;\r\n        let result = '';\r\n        for (let i = 0; i < value.length; i++) {\r\n          if (/\\d/.test(value[i])) {\r\n            if (digitCount < 11) {\r\n              result += value[i];\r\n              digitCount++;\r\n            }\r\n          } else if (value[i] === '|') {\r\n            result += '|';\r\n          }\r\n        }\r\n        value = result;\r\n      }\r\n      this.editableClient.phone_number = value;\r\n    },\r\n    filterEmail() {\r\n      let filtered = this.editableClient.email.replace(/[^a-zA-Z0-9,.\\-@|]/g, '');\r\n      if (filtered.length > 50) {\r\n        filtered = filtered.slice(0, 50);\r\n      }\r\n      this.editableClient.email = filtered;\r\n    },\r\n    filterJobDetails() {\r\n      this.editableClient.job_details = this.editableClient.job_details.replace(/[^a-zA-Z0-9,.\\-| ]/g, '');\r\n    },\r\n    filterSourceOfFunds() {\r\n      this.editableClient.source_of_funds = this.editableClient.source_of_funds.replace(/[^a-zA-Z0-9,.\\-| ]/g, '');\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.rounded-drawer {\r\n  border-top-right-radius: 18px;\r\n  border-bottom-right-radius: 18px;\r\n}\r\n.drawer-link {\r\n  border-radius: 8px;\r\n  margin: 2px 4px;\r\n  transition: background 0.2s;\r\n}\r\n.drawer-link:hover {\r\n  background: #e0f2f1 !important;\r\n}\r\n.drawer-link--active {\r\n  background: #c8e6c9 !important;\r\n  font-weight: bold;\r\n}\r\n.profile-card {\r\n  border-radius: 14px;\r\n}\r\n.profile-title {\r\n  font-size: 1.6rem;\r\n  font-weight: 700;\r\n}\r\n.profile-subtitle {\r\n  color: #757575;\r\n  font-size: 1.1rem;\r\n}\r\n.profile-location {\r\n  color: #bdbdbd;\r\n  font-size: 1rem;\r\n}\r\n.label {\r\n  color: #757575;\r\n  font-size: 0.95rem;\r\n  font-weight: 500;\r\n  margin-bottom: 2px;\r\n}\r\n.text-success {\r\n  color: #4CAF50;\r\n}\r\n</style>\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}