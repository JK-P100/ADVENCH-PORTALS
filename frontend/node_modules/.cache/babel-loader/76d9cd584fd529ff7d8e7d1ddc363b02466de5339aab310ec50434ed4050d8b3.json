{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'AppDashboard',\n  data() {\n    return {\n      drawer: false,\n      stats: {\n        totalClients: 0,\n        totalProperties: 0,\n        totalSales: 0\n      },\n      lastStats: {\n        totalClients: 0,\n        totalProperties: 0,\n        totalSales: 0\n      },\n      drawerItems: [{\n        title: 'DASHBOARD',\n        icon: 'mdi-view-dashboard',\n        to: '/dashboard'\n      }, {\n        title: 'CLIENT TRACKING',\n        icon: 'mdi-account-group',\n        to: '/clients'\n      }, {\n        title: 'AGENT TRACKING',\n        icon: 'mdi-account-tie',\n        to: '/agents'\n      }, {\n        title: 'COMMS. MGMT.',\n        icon: 'mdi-message-text-outline',\n        to: '/commission-management'\n      }, {\n        title: 'SALES TRACKING',\n        icon: 'mdi-chart-line',\n        to: '/sales-tracking'\n      }, {\n        title: 'PROPERTY LISTING',\n        icon: 'mdi-home-city-outline',\n        to: {\n          name: 'PropertyListing'\n        }\n      }],\n      statsInterval: null,\n      properties: [],\n      propertiesInterval: null\n    };\n  },\n  methods: {\n    fetchStats() {\n      axios.get('http://localhost:3000/api/stats').then(response => {\n        this.lastStats = {\n          ...this.stats\n        };\n        this.stats = response.data;\n      }).catch(error => {\n        console.error('Error fetching stats:', error);\n      });\n    },\n    fetchProperties() {\n      axios.get('http://localhost:3000/api/private-properties').then(res => {\n        this.properties = res.data;\n      }).catch(err => {\n        console.error('Error fetching properties:', err);\n      });\n    },\n    logout() {\n      localStorage.removeItem('isAuthenticated');\n      this.$router.push('/login');\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const d = new Date(dateStr);\n      if (isNaN(d)) return dateStr;\n      const year = d.getFullYear();\n      const month = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    }\n  },\n  mounted() {\n    this.fetchStats();\n    this.statsInterval = setInterval(this.fetchStats, 10000);\n\n    // Real-time properties\n    this.fetchProperties();\n    this.propertiesInterval = setInterval(this.fetchProperties, 5000); // every 5 seconds\n  },\n  beforeUnmount() {\n    if (this.statsInterval) clearInterval(this.statsInterval);\n    if (this.propertiesInterval) clearInterval(this.propertiesInterval);\n  }\n};","map":{"version":3,"names":["axios","name","data","drawer","stats","totalClients","totalProperties","totalSales","lastStats","drawerItems","title","icon","to","statsInterval","properties","propertiesInterval","methods","fetchStats","get","then","response","catch","error","console","fetchProperties","res","err","logout","localStorage","removeItem","$router","push","formatDate","dateStr","d","Date","isNaN","year","getFullYear","month","String","getMonth","padStart","day","getDate","mounted","setInterval","beforeUnmount","clearInterval"],"sources":["C:\\Users\\jann kevin\\Desktop\\ADVENCH PORTALS\\frontend\\src\\components\\Dashboard.vue"],"sourcesContent":["<template>\n  <v-app style=\"overflow: hidden; height:100vh\">\n    <v-navigation-drawer\n      v-model=\"drawer\"\n      app\n      color=\"#f5f5f5\"\n      width=\"260\"\n      class=\"elevation-3 rounded-drawer\"\n    >\n      <v-sheet color=\"white\" class=\"pa-4 d-flex align-center\" elevation=\"0\">\n        <img src=\"../assets/logo.png\" alt=\"Advench Realty Logo\" style=\"max-width: 48px; margin-right: 12px;\" />\n        <div>\n          <div class=\"font-weight-bold\" style=\"color:#388e3c;\">ADVЕNCH</div>\n          <div class=\"text-caption\" style=\"color:#757575;\">REALTY</div>\n        </div>\n        <v-spacer></v-spacer>\n        <v-btn icon @click=\"drawer = false\">\n          <v-icon color=\"grey darken-2\">mdi-close</v-icon>\n        </v-btn>\n      </v-sheet>\n      <v-divider></v-divider>\n      <v-list dense nav>\n        <v-list-item\n          v-for=\"item in drawerItems\"\n          :key=\"item.title\"\n          :to=\"item.to\"\n          link\n          class=\"drawer-link\"\n          active-class=\"drawer-link--active\"\n          @click=\"drawer = false\"\n        >\n          <v-list-item-icon>\n            <v-icon :color=\"item.iconColor || 'green darken-2'\">{{ item.icon }}</v-icon>\n          </v-list-item-icon>\n          <v-list-item-title class=\"ml-2\">{{ item.title }}</v-list-item-title>\n        </v-list-item>\n      </v-list>\n      <v-divider class=\"my-2\"></v-divider>\n      <v-list dense>\n        <v-list-item link @click=\"logout\" class=\"drawer-link\">\n          <v-list-item-icon>\n            <v-icon color=\"red darken-1\">mdi-logout</v-icon>\n          </v-list-item-icon>\n          <v-list-item-title class=\"ml-2\">LOGOUT</v-list-item-title>\n        </v-list-item>\n      </v-list>\n    </v-navigation-drawer>\n\n    <!-- Main Content -->\n    <v-main class=\"dashboard-bg\">\n      <v-container fluid class=\"pa-0\" style=\"max-width: 90vw; margin: 0 auto;\">\n        <!-- Duplicated Header from SalesTracking.vue -->\n        <v-row align=\"center\" justify=\"space-between\" class=\"px-4 mt-4\">\n          <v-col cols=\"auto\" class=\"d-flex align-center\">\n            <img src=\"../assets/logo.png\" alt=\"Advench Realty Logo\" style=\"max-width: 60px; margin-right: 12px;\" />\n            <div>\n              <h2 class=\"text-h6 font-weight-bold mb-0\">ADVЕNCH REALTY</h2>\n              <p class=\"text-subtitle-2 mb-0\">AND DEVELOPMENT CO.</p>\n            </div>\n          </v-col>\n          <v-col cols=\"auto\">\n            <v-btn icon @click=\"drawer = true\">\n              <v-icon color=\"green darken-4\">mdi-menu</v-icon>\n            </v-btn>\n          </v-col>\n        </v-row>\n        <!-- End Duplicated Header -->\n\n        <v-row class=\"mt-8\" align=\"stretch\">\n          <!-- Welcome Section -->\n          <v-col cols=\"12\" md=\"8\">\n            <v-card outlined class=\"pa-6\" style=\"background-color: #f4fbf4; min-height: 200px;\">\n              <div class=\"d-flex align-center mb-4\">\n                <div>\n                  <h1 class=\"text-h4 font-weight-bold mb-1\">Welcome to ADVЕNCH REALTY</h1>\n                  <p class=\"text-subtitle-1 mb-0\">Your trusted partner in real estate and property development.Your trusted partner in real estate and property development.Your trusted partner in real estate and property development.Your trusted partner in real estate and property development.</p>\n                </div>\n              </div>\n              <div>\n                <p>\n                  Stay updated with real-time tracking of clients, agents, properties, commissions, and sales performance right here on your dashboard.\n                </p>\n              </div>\n            </v-card>\n          </v-col>\n\n          <!-- Sales Section -->\n          <v-col cols=\"12\" md=\"4\">\n            <v-card outlined class=\"pa-3 d-flex flex-column align-center justify-center\" style=\"background-color: #f4fbf4; min-height: 120px;\">\n              <v-icon size=\"40\" color=\"green darken-4\" class=\"mb-1\">mdi-currency-usd</v-icon>\n              <div class=\"text-h5 font-weight-bold mb-1\">SALES</div>\n              <div class=\"text-h4 font-weight-bold mb-1\">${{ stats.totalSales }}</div>\n              <div class=\"text-caption mb-2\">This Month So Far</div>\n              <v-divider></v-divider>\n              <div class=\"text-h6 font-weight-bold mt-2 mb-1\">$35,000</div>\n              <div class=\"text-caption\">Previous Month</div>\n            </v-card>\n          </v-col>\n        </v-row>\n\n        <!-- Modules Row (Clients, Properties, Agents, Commission) -->\n        <v-row class=\"mt-6\" dense>\n          <v-col cols=\"12\" md=\"3\">\n            <v-card class=\"module-card pa-4\" style=\"background: linear-gradient(135deg, #e0f7fa, #f4fbf4); box-shadow: 0 4px 24px #e0e0e0;\">\n              <v-icon size=\"40\" color=\"green darken-4\" class=\"mb-2\">mdi-account-group</v-icon>\n              <div class=\"module-title\">CLIENTS</div>\n              <div class=\"module-value\">\n                <span>{{ stats.totalClients }}</span>\n                <v-icon small color=\"green\" v-if=\"stats.totalClients > lastStats.totalClients\">mdi-arrow-up</v-icon>\n                <v-icon small color=\"red\" v-else-if=\"stats.totalClients < lastStats.totalClients\">mdi-arrow-down</v-icon>\n              </div>\n              <div class=\"module-desc\">Total Clients</div>\n            </v-card>\n          </v-col>\n          <v-col cols=\"12\" md=\"3\">\n            <v-card class=\"module-card pa-4\">\n              <v-icon size=\"40\" color=\"green darken-4\" class=\"mb-2\">mdi-home-city-outline</v-icon>\n              <div class=\"module-title\">PROPERTIES</div>\n              <div class=\"module-value\">{{ stats.totalProperties }}</div>\n              <div class=\"module-desc\">Total Properties</div>\n            </v-card>\n          </v-col>\n          <v-col cols=\"12\" md=\"3\">\n            <v-card class=\"module-card pa-4\">\n              <v-icon size=\"40\" color=\"green darken-4\" class=\"mb-2\">mdi-account-tie</v-icon>\n              <div class=\"module-title\">AGENTS</div>\n              <div class=\"module-value\">10</div>\n              <div class=\"module-desc\">Total Agents</div>\n            </v-card>\n          </v-col>\n          <v-col cols=\"12\" md=\"3\">\n            <v-card class=\"module-card pa-4\">\n              <v-icon size=\"40\" color=\"green darken-4\" class=\"mb-2\">mdi-message-text-outline</v-icon>\n              <div class=\"module-title\">COMMISSION</div>\n              <div class=\"module-value\">$12,000</div>\n              <div class=\"module-desc\">This Month</div>\n            </v-card>\n          </v-col>\n        </v-row>\n\n        <!-- Real-Time Property Records Table -->\n        <v-row class=\"mt-8\">\n          <v-col cols=\"12\">\n            <h2 class=\"text-h5 font-weight-bold mb-2\">Real-Time Property Records</h2>\n            <div class=\"table-container\">\n              <v-simple-table dense class=\"custom-table\">\n                <template v-slot:default>\n                  <thead>\n                    <tr>\n                      <th class=\"table-header\">ID</th>\n                      <th class=\"table-header\">Ownership</th>\n                      <th class=\"table-header\">Owner Firstname</th>\n                      <th class=\"table-header\">Owner Lastname</th>\n                      <th class=\"table-header\">Price</th>\n                      <th class=\"table-header\">Model</th>\n                      <th class=\"table-header\">Location</th>\n                      <th class=\"table-header\">Lot Area</th>\n                      <th class=\"table-header\">Type</th>\n                      <th class=\"table-header\">Status</th>\n                      <th class=\"table-header\">Date Listed</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(property, index) in properties\" :key=\"index\" class=\"table-row\">\n                      <td>{{ property.id }}</td>\n                      <td>{{ property.ownership }}</td>\n                      <td>{{ property.owner_firstname }}</td>\n                      <td>{{ property.owner_lastname }}</td>\n                      <td>{{ property.price }}</td>\n                      <td>{{ property.model }}</td>\n                      <td>{{ property.location }}</td>\n                      <td>{{ property.lot_area }}</td>\n                      <td>{{ property.type }}</td>\n                      <td>{{ property.status }}</td>\n                      <td>{{ formatDate(property.date_listed) }}</td>\n                    </tr>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </div>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-main>\n\n    <!-- Footer -->\n    <v-footer app color=\"green darken-4\" dark style=\"border-top: 2px solid #fff;\">\n      <v-container>\n        <span>Copyright © 2023. ADVЕNCH REALTY and development co. All rights Reserved.</span>\n      </v-container>\n    </v-footer>\n  </v-app>\n</template>\n\n<script>\nimport axios from 'axios';\n\nexport default {\n  name: 'AppDashboard',\n  data() {\n    return {\n      drawer: false,\n      stats: {\n        totalClients: 0,\n        totalProperties: 0,\n        totalSales: 0,\n      },\n      lastStats: {\n        totalClients: 0,\n        totalProperties: 0,\n        totalSales: 0,\n      },\n      drawerItems: [\n        { title: 'DASHBOARD', icon: 'mdi-view-dashboard', to: '/dashboard' },\n        { title: 'CLIENT TRACKING', icon: 'mdi-account-group', to: '/clients' },\n        { title: 'AGENT TRACKING', icon: 'mdi-account-tie', to: '/agents' },\n        { title: 'COMMS. MGMT.', icon: 'mdi-message-text-outline', to: '/commission-management' },\n        { title: 'SALES TRACKING', icon: 'mdi-chart-line', to: '/sales-tracking' },\n        { title: 'PROPERTY LISTING', icon: 'mdi-home-city-outline', to: { name: 'PropertyListing' } },\n      ],\n      statsInterval: null,\n      properties: [],\n      propertiesInterval: null,\n    };\n  },\n  methods: {\n    fetchStats() {\n      axios\n        .get('http://localhost:3000/api/stats')\n        .then((response) => {\n          this.lastStats = { ...this.stats };\n          this.stats = response.data;\n        })\n        .catch((error) => {\n          console.error('Error fetching stats:', error);\n        });\n    },\n    fetchProperties() {\n      axios\n        .get('http://localhost:3000/api/private-properties')\n        .then((res) => {\n          this.properties = res.data;\n        })\n        .catch((err) => {\n          console.error('Error fetching properties:', err);\n        });\n    },\n    logout() {\n      localStorage.removeItem('isAuthenticated');\n      this.$router.push('/login');\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const d = new Date(dateStr);\n      if (isNaN(d)) return dateStr;\n      const year = d.getFullYear();\n      const month = String(d.getMonth() + 1).padStart(2, '0');\n      const day = String(d.getDate()).padStart(2, '0');\n      return `${year}-${month}-${day}`;\n    },\n  },\n  mounted() {\n    this.fetchStats();\n    this.statsInterval = setInterval(this.fetchStats, 10000);\n\n    // Real-time properties\n    this.fetchProperties();\n    this.propertiesInterval = setInterval(this.fetchProperties, 5000); // every 5 seconds\n  },\n  beforeUnmount() {\n    if (this.statsInterval) clearInterval(this.statsInterval);\n    if (this.propertiesInterval) clearInterval(this.propertiesInterval);\n  },\n};\n</script>\n\n<style>\nhtml, body, #app, .v-application {\n  background: #f4fbf4 !important; /* very light green */\n}\n\n.dashboard-bg {\n  background: #f4fbf4 !important;\n}\n\n.rounded-drawer {\n  border-top-right-radius: 18px;\n  border-bottom-right-radius: 18px;\n}\n  font-weight: bold;\n}\n.module-card {\n  background: #f4fbf4 !important;\n  border-radius: 18px;\n  min-height: 180px;\n  text-align: center;\n  box-shadow: 0 2px 8px #e0e0e0;\n}\n.module-title {\n  font-size: 1.1rem;\n  font-weight: 600;\n  color: #1a2340;\n}\n.module-value {\n  font-size: 2rem;\n  font-weight: 700;\n  color: #1a2340;\n}\n.module-desc {\n  font-size: 0.95rem;\n  color: #7b7b7b;\n}\n.table-container {\n  background: white;\n  border-radius: 12px;\n  overflow: hidden;\n  box-shadow: 0 4px 24px rgba(0, 0, 0, 0.1);\n}\n.custom-table {\n  width: 100%;\n  border-collapse: collapse;\n}\n.table-header {\n  background: #f0f0f0;\n  font-weight: 500;\n  color: #333;\n  padding: 12px 8px;\n  text-align: left;\n}\n.table-row {\n  transition: background 0.2s;\n}\n.table-row:hover {\n  background: #f9f9f9;\n}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}